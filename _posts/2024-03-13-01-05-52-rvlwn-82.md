---
layout: weekly
author: '呀呀呀'
title: 'RISC-V Linux 内核及周边技术动态第 82 期'
draft: false
group: 'news'
album: 'RISC-V Linux'
license: 'cc-by-nc-nd-4.0'
permalink: /rvlwn-82/
description: 'RISC-V Linux 内核及周边技术动态第 82 期'
category:
  - 开源项目
  - RISC-V
tags:
  - Linux
  - RISC-V
---

> 时间：20240310<br/>
> 编辑：晓怡<br/>
> 仓库：[RISC-V Linux 内核技术调研活动](https://gitee.com/tinylab/riscv-linux)<br/>
> 赞助：PLCT Lab, ISCAS

## 内核动态

### RISC-V 架构支持

**[v9: riscv: sophgo: add clock support for Sophgo CV1800/SG2000 SoCs](http://lore.kernel.org/linux-riscv/IA1PR20MB4953512A4DCAF293D7B1CBC2BB262@IA1PR20MB4953.namprd20.prod.outlook.com/)**

> Add clock controller support for the Sophgo CV1800B, CV1812H and SG2000.
>

**[v9: riscv: Use Kconfig to set unaligned access speed](http://lore.kernel.org/linux-riscv/20240308-disable_misaligned_probe_config-v9-0-a388770ba0ce@rivosinc.com/)**

> If the hardware unaligned access speed is known at compile time, it is
> possible to avoid running the unaligned access speed probe to speedup
> boot-time.
>

**[v16: Linux RISC-V AIA Support](http://lore.kernel.org/linux-riscv/20240307140307.646078-1-apatel@ventanamicro.com/)**

> The RISC-V AIA specification is ratified as-per the RISC-V international
> process. The latest ratified AIA specifcation can be found at:
> https://github.com/riscv/riscv-aia/releases/download/1.0/riscv-interrupts-1.0.pdf
>

**[v1: riscv: dmi: Add SMBIOS/DMI support](http://lore.kernel.org/linux-riscv/20240307083154.346542-1-haibo1.xu@intel.com/)**

> Enable the dmi driver for riscv which would allow access the
> SMBIOS info through some userspace file(/sys/firmware/dmi/*).
>
> The change was based on that of arm64 and has been verified
> by dmidecode tool.
>

**[GIT PULL: KVM/riscv changes for 6.9](http://lore.kernel.org/linux-riscv/CAAhSdy1rYFoYjCRWTPouiT=tiN26Z_v3Y36K2MyDrcCkRs1Luw@mail.gmail.com/)**

> The following changes since commit d206a76d7d2726f3b096037f2079ce0bd3ba329b:
>
>   Linux 6.8-rc6 (2024-02-25 15:46:06 -0800)
>
> are available in the Git repository at:
>
>   https://github.com/kvm-riscv/linux.git tags/kvm-riscv-6.9-1
>

**[v3: clocksource: timer-riscv: Clear timer interrupt on timer initialization](http://lore.kernel.org/linux-riscv/20240306172330.255844-1-leyfoon.tan@starfivetech.com/)**

> In the RISC-V specification, the stimecmp register doesn't have a default
> value. To prevent the timer interrupt from being triggered during timer
> initialization, clear the timer interrupt by writing stimecmp with a
> maximum value.
>

**[v1: riscv: Implement HAVE_DYNAMIC_FTRACE_WITH_CALL_OPS](http://lore.kernel.org/linux-riscv/20240306165904.108141-1-puranjay12@gmail.com/)**

> This patch enables support for DYNAMIC_FTRACE_WITH_CALL_OPS on RISC-V.
> This allows each ftrace callsite to provide an ftrace_ops to the common
> ftrace trampoline, allowing each callsite to invoke distinct tracer
> functions without the need to fall back to list processing or to
> allocate custom trampolines for each callsite. This significantly speeds
> up cases where multiple distinct trace functions are used and callsites
> are mostly traced by a single tracer.
>

**[[v2 PATCH 0/3] arch: mm, vdso: consolidate PAGE_SIZE definition](http://lore.kernel.org/linux-riscv/20240306141453.3900574-1-arnd@kernel.org/)**

> Naresh noticed that the newly added usage of the PAGE_SIZE macro in
> include/vdso/datapage.h introduced a build regression. I had an older
> patch that I revived to have this defined through Kconfig rather than
> through including asm/page.h, which is not allowed in vdso code.
>

**[v5: riscv: add initial support for Canaan Kendryte K230](http://lore.kernel.org/linux-riscv/tencent_FC10B3C630BE27412FED2547245CBE18D807@qq.com/)**

> K230 is an ideal chip for RISC-V Vector 1.0 evaluation now. Add initial
> support for it to allow more people to participate in building drivers
> to mainline for it.
>

**[GIT PULL: RISC-V firmware drivers for v6.9](http://lore.kernel.org/linux-riscv/20240305-vicinity-dumpling-8943ef26f004@spud/)**

> Feel free to cherry pick this either if it makes more sense (or even
> send it to fixes instead). It's a fix for an oversize allocation, so
> given how late it is in the merge window I opted to send it as 6.9
> material.
>

**[v1: drivers/perf: riscv: Disable PERF_SAMPLE_BRANCH_* while not supported](http://lore.kernel.org/linux-riscv/20240305155223.1823287-1-pulehui@huaweicloud.com/)**

> RISC-V perf does not yet support branch sampling. Two riscv bpf
> testcases get_branch_snapshot and perf_branches/perf_branches_hw failed
> due to not disabling such sampling.
>

**[v1: Inconsistent sifive,fu540-c000-uart binding.](http://lore.kernel.org/linux-riscv/20240304105947.SJcVAdr1@linutronix.de/)**

> note that the driver has a trailing 0 in the binding while the yaml
> description and the DT part does not.
> The 'sifive,uart' has a trailing 0 where the 0 denotes the version UART
> IP.
>

**[v4: riscv: pwm: sophgo: add pwm support for CV1800](http://lore.kernel.org/linux-riscv/20240304085933.1246964-1-qiujingbao.dlmu@gmail.com/)**

> The Sophgo CV1800 chip provides a set of four independent
> PWM channel outputs.
> This series adds PWM controller support for Sophgo cv1800.
>

### 进程调度

**[v1: sched: Add missing memory barrier in switch_mm_cid](http://lore.kernel.org/lkml/20240308150719.676738-1-mathieu.desnoyers@efficios.com/)**

> Many architectures' switch_mm() (e.g. arm64) do not have an smp_mb()
> which the core scheduler code has depended upon since commit:
>
>     commit 223baf9d17f25 ("sched: Fix performance regression introduced by mm_cid")
>

**[v1: -v1: sched/balancing: Standardize the naming of scheduler load-balancing functions](http://lore.kernel.org/lkml/20240308111819.1101550-1-mingo@kernel.org/)**

> Over the years we've grown a colorful zoo of scheduler
> load-balancing function names - both following random,
> idiosyncratic patterns, and gaining historic misnomers
> that are not accurate anymore.
>

**[v1: sched: Deprecate DOUBLE_TICK feature](http://lore.kernel.org/lkml/20240308052304.1835792-1-vishalc@linux.ibm.com/)**

> Upon examining commit 5e963f2bd465, titled "sched/fair: Commit to EEVDF,"
>

**[v1: RESEND: kernel/sched: use seq_putc instead of seq_puts](http://lore.kernel.org/lkml/20240306234100.10356-1-Maxim.Moskalets@kaspersky.com/)**

> Using seq_putc for newline characters is faster and more appropriate
> than seq_puts, since only one character is passed and there is no need
> to use a more powerful and less fast function
>

**[v1: sched/fair: simplify __calc_delta()](http://lore.kernel.org/lkml/20240306222838.15087-1-daweilics@gmail.com/)**

> Based on how __calc_delta() is called now, the input parameter, weight
> is always NICE_0_LOAD. I think we don't need it as an input parameter
> now?
>
> Also, when weight is always NICE_0_LOAD, the initial fact value is
> always 2^10, and the first fact_hi will always be 0. Thus, we can get
> rid of the first if bock.
>

### 内存管理

**[v1: mm/slub: mark racy accesses on slab->slabs](http://lore.kernel.org/linux-mm/tencent_60DA4643DAB0341D8320190AC0A403636807@qq.com/)**

> The reads of slab->slabs are racy because it may be changed by
> put_cpu_partial concurrently. And in slabs_cpu_partial_show ->slabs is
> only used for output. Data-racy reads from shared variables that are used
> only for diagnostic purposes should typically use data_race(), since it
> is normally not a problem if the values are off by a little.
>

**[v1: mm/vmalloc.c: optimize to reduce arguments of alloc_vmap_area()](http://lore.kernel.org/linux-mm/20240309044454.648888-1-bhe@redhat.com/)**

> If called by __get_vm_area_node(), by open coding the field assignments
> of 'struct vm_struct *vm', and move the vm->flags and vm->caller
> assignments into __get_vm_area_node(), the passed in arguments 'flags'
> and 'caller' can be removed.
>

**[v2: Allow migrate on protnone reference with MPOL_PREFERRED_MANY policy](http://lore.kernel.org/linux-mm/cover.1709909210.git.donettom@linux.ibm.com/)**

> This patchset is to optimize the cross-socket memory access with
> MPOL_PREFERRED_MANY policy.
>

**[v2: reclaim contended folios asynchronously instead of promoting them](http://lore.kernel.org/linux-mm/20240308031126.750-1-lipeifeng@oppo.com/)**

> Commit 6d4675e60135 ("mm: don't be stuck to rmap lock on reclaim path")
> prevents the reclaim path from becoming stuck on the rmap lock. However,
> it reinserts those folios at the head of the LRU during shrink_folio_list,
> even if those folios are very cold.
>

**[v3: bpf-next: bpf: Introduce BPF arena.](http://lore.kernel.org/linux-mm/20240308010812.89848-1-alexei.starovoitov@gmail.com/)**

> The work on bpf_arena was inspired by Barret's work:
> https://github.com/google/ghost-userspace/blob/main/lib/queue.bpf.h
> that implements queues, lists and AVL trees completely as bpf programs
> using giant bpf array map and integer indices instead of pointers.

**[v2: mm/kmemleak: Don't hold kmemleak_lock when calling printk()](http://lore.kernel.org/linux-mm/20240307184707.961255-1-longman@redhat.com/)**

> When some error conditions happen (like OOM), some kmemleak functions
> call printk() to dump out some useful debugging information while holding
> the kmemleak_lock. This may cause deadlock as the printk() function
> may need to allocate additional memory leading to a create_object()
> call acquiring kmemleak_lock again.
>

**[v2: mm: Kill ->launder_folio()](http://lore.kernel.org/linux-mm/1941114.1709828144@warthog.procyon.org.uk/)**

> invalidate_inode_pages2_range() and its wrappers are frequently used to
> invalidate overlapping folios prior to and after doing direct I/O.  This
> calls ->launder_folio() to flush dirty folios out to the backing store,
> keeping the folio lock across the I/O - presumably to prevent the folio
> from being redirtied and thereby prevent it from being removed.
>

**[v5: filemap: avoid unnecessary major faults in filemap_fault()](http://lore.kernel.org/linux-mm/20240307023055.782117-1-zhangpeng362@huawei.com/)**

> The major fault occurred when using mlockall(MCL_CURRENT | MCL_FUTURE)
> in application, which leading to an unexpected issue[1].
>
> This caused by temporarily cleared PTE during a read+clear/modify/write
> update of the PTE, eg, do_numa_page()/change_pte_range().
>

**[v3: ARM64: Dynamically allocate cpumasks and increase supported CPUs to 512](http://lore.kernel.org/linux-mm/37099a57-b655-3b3a-56d0-5f7fbd49d7db@gentwo.org/)**

> Currently defconfig selects NR_CPUS=256, but some vendors (e.g. Ampere
> Computing) are planning to ship systems with 512 CPUs. So that all CPUs on
> these systems can be used with defconfig, we'd like to bump NR_CPUS to 512.
> Therefore this patch increases the default NR_CPUS from 256 to 512.
>

**[v2: mm: Add an explicit smp_wmb() to UFFDIO_CONTINUE](http://lore.kernel.org/linux-mm/20240307010250.3847179-1-jthoughton@google.com/)**

> Users of UFFDIO_CONTINUE may reasonably assume that a write memory
> barrier is included as part of UFFDIO_CONTINUE. That is, a user may
> believe that all writes it has done to a page that it is now
> UFFDIO_CONTINUE'ing are guaranteed to be visible to anyone subsequently
> reading the page through the newly mapped virtual memory region.
>

**[v1: mm: Replace ->launder_folio() with flush and wait](http://lore.kernel.org/linux-mm/1668172.1709764777@warthog.procyon.org.uk/)**

> Here's a patch to have a go at getting rid of ->launder_folio().  Since it's
> failable and cannot guarantee that pages in the range are removed, I've tried
> to replace laundering with just flush-and-wait, dropping the folio lock around
> the I/O.
>

**[v5: Memory allocation profiling](http://lore.kernel.org/linux-mm/20240306182440.2003814-1-surenb@google.com/)**

> Rebased over mm-unstable.
>
> Overview:
> Low overhead [1] per-callsite memory allocation profiling. Not just for
> debug kernels, overhead low enough to be deployed in production.
>

**[v6: STABLE: mm/migrate: set swap entry values of THP tail pages properly.](http://lore.kernel.org/linux-mm/20240306155217.118467-1-zi.yan@sent.com/)**

> The tail pages in a THP can have swap entry information stored in their
> private field. When migrating to a new page, all tail pages of the new
> page need to update ->private to avoid future data corruption.
>

**[v3: device backed vmemmap crash dump support](http://lore.kernel.org/linux-mm/20240306102846.1020868-1-lizhijian@fujitsu.com/)**

> Hello folks,
>
> Compared with the V2[1] I posted a long time ago, this time it is a
> completely new proposal design.
>
> ### Background and motivate overview ###
>

**[v2: make the hugetlb migration strategy consistent](http://lore.kernel.org/linux-mm/cover.1709719720.git.baolin.wang@linux.alibaba.com/)**

> As discussed in previous thread [1], there is an inconsistency when handling
> hugetlb migration. When handling the migration of freed hugetlb, it prevents
> fallback to other NUMA nodes in alloc_and_dissolve_hugetlb_folio().
>

**[v2: mm: hold PTL from the first PTE while reclaiming a large folio](http://lore.kernel.org/linux-mm/20240306095219.71086-1-21cnbao@gmail.com/)**

> Within try_to_unmap_one(), page_vma_mapped_walk() races with other
> PTE modifications preceded by pte clear. While iterating over PTEs
> of a large folio, it only starts acquiring PTL from the first valid
> (present) PTE. PTE modifications can temporarily set PTEs to
> pte_none.
>

**[v13: DEPT(Dependency Tracker)](http://lore.kernel.org/linux-mm/20240306085513.41482-1-byungchul@sk.com/)**

> I added a document describing DEPT, that would help you understand what
> DEPT is and how DEPT works. You can use DEPT just with CONFIG_DEPT on
> and by checking dmesg in runtime.
>

**[v1: RESEND: Split IOMMU DMA mapping operation to two steps](http://lore.kernel.org/linux-mm/cover.1709635535.git.leon@kernel.org/)**

> This is posted as RFC to get a feedback on proposed split, but RDMA, VFIO and
> DMA patches are ready for review and inclusion, the NVMe patches are still in
> progress as they require agreement on API first.
>

### 文件系统

**[v8: rust: xarray: Add an abstraction for XArray](http://lore.kernel.org/linux-fsdevel/20240309235927.168915-2-mcanal@igalia.com/)**

> This abstraction is part of the set of dependencies I need to upstream
> rustgem, a virtual GEM provider driver in the DRM [1]. Also, this
> abstraction will be useful for the upstreaming process of the drm/asahi
> driver.
>

**[v10: Landlock: IOCTL support](http://lore.kernel.org/linux-fsdevel/20240309075320.160128-1-gnoack@google.com/)**

> Introduce the LANDLOCK_ACCESS_FS_IOCTL_DEV right, which restricts the
> use of ioctl(2) on block and character devices.
>

**[v1: ext4: Add support for ext4_map_blocks_atomic()](http://lore.kernel.org/linux-fsdevel/3a417188e5abe3048afac3d31ebbf11588b6d68d.1709927824.git.ritesh.list@gmail.com/)**

> Currently ext4 exposes [fsawu_min, fsawu_max] size as
> [blocksize, clustersize] (given the hw block device constraints are
> larger than FS atomic write units).
>

**[v1: unicode: make utf8 test count static](http://lore.kernel.org/linux-fsdevel/20240308183215.1924331-1-ben.dooks@codethink.co.uk/)**

> The variables failed_tests and total_tests are not used outside of the
> utf8-selftest.c file so make them static to avoid the following warnings:
>

**[v1: fiemap extension to add physical extent length](http://lore.kernel.org/linux-fsdevel/cover.1709918025.git.sweettea-kernel@dorminy.me/)**

> For many years, various btrfs users have written programs to discover
> the actual disk space used by files, using root-only interfaces.
> However, this information is a great fit for fiemap: it is inherently
>

**[GIT PULL: vfs uuid](http://lore.kernel.org/linux-fsdevel/20240308-vfs-uuid-f917b2acae70@brauner/)**

> /* Summary */
> This adds two new ioctl()s for getting the filesystem uuid and
> retrieving the sysfs path based on the path of a mounted filesystem. The
> bcachefs pull request should include a merge of this as well as it
> depends on the two new ioctls. Getting the filesystem uuid has been
> implemented in filesystem specific code for a while it's now lifted as a
> generic ioctl.
>

**[v1: eventpoll: record task that adds to monitor list.](http://lore.kernel.org/linux-fsdevel/20240308042136.2739321-1-imran.f.khan@oracle.com/)**

> Recording task_struct in involved eppoll_entry's wait_queue_entry, allows us
> to check this using a probe (say dtrace) at this function.
> We could also achieve this by checking wait_queue_entry on eventpoll's
> wait_queue_head itself, but that would involve more indirections.
>

**[v2: statx: stx_subvol](http://lore.kernel.org/linux-fsdevel/20240308022914.196982-1-kent.overstreet@linux.dev/)**

> Add a new statx field for (sub)volume identifiers, as implemented by
> btrfs and bcachefs.
>
> This includes bcachefs support; we'll definitely want btrfs support as
> well.
>

**[v2: isofs: convert isofs to use the new mount API](http://lore.kernel.org/linux-fsdevel/409e28da-9c19-427a-acfb-78788f0a23b8@redhat.com/)**

> This also renames iso9660_options to isofs_options, for
> consistency.
>

**[v2: fs_parser: handle parameters that can be empty and don't have a value](http://lore.kernel.org/linux-fsdevel/20240307160225.23841-1-lhenriques@suse.de/)**

> While investigating an ext4/053 fstest failure, I realised that there was
> an issue when the flag 'fs_param_can_be_empty' is set in a parameter and it
> doesn't have a value
>

**[v2: minix: convert minix to use the new mount api](http://lore.kernel.org/linux-fsdevel/20240307163325.998723-1-bodonnel@redhat.com/)**

> Convert the minix filesystem to use the new mount API.
>
> Tested using mount and remount on minix device.
>

**[v2: bpf-next: add new acquire/release BPF kfuncs](http://lore.kernel.org/linux-fsdevel/cover.1709675979.git.mattbobrowski@google.com/)**

> The original cover letter providing background context and motivating
> factors around the needs for the BPF kfuncs introduced within this
> patch series can be found here [0], so please do reference that if
> need be.
>

**[v1: vfs: convert debugfs & tracefs to the new mount API](http://lore.kernel.org/linux-fsdevel/cfdebcc3-b9de-4680-a764-6bdf37c0accb@redhat.com/)**

> Since debugfs and tracefs are cut & pasted one way or the other,
> do these at the same time.
>
> Both of these patches originated in dhowells' tree at
> https://git.kernel.org/pub/scm/linux/kernel/git/dhowells/linux-fs.git/log/?h=mount-api-viro
>

**[v1: reiserfs: Convert to writepages](http://lore.kernel.org/linux-fsdevel/20240305185208.1200166-1-willy@infradead.org/)**

> Use buffer_migrate_folio to handle folio migration instead of writing
> out dirty pages and reading them back in again.  Use writepages to write
> out folios more efficiently.  We now only do that wait_on_write_block
> check once per call to writepages instead of once per page.
>

**[v1: coredump: get machine check errors early rather than during iov_iter](http://lore.kernel.org/linux-fsdevel/20240305133336.3804360-1-tongtiangen@huawei.com/)**

> The commit f1982740f5e7 ("iov_iter: Convert iterate*() to inline funcs")
> leads to deadloop in generic_perform_write()[1], due to return value of
> copy_page_from_iter_atomic() changed from non-zero value to zero.
>

**[v1: xattr: restrict vfs_getxattr_alloc() allocation size](http://lore.kernel.org/linux-fsdevel/20240305-effekt-luftzug-51913178f6cd@brauner/)**

> The vfs_getxattr_alloc() interface is a special-purpose in-kernel api
> that does a racy query-size+allocate-buffer+retrieve-data. It is used by
> EVM, IMA, and fscaps to retrieve xattrs.
>

**[v1: fanotify: allow freeze when waiting response for permission events](http://lore.kernel.org/linux-fsdevel/BD33543C483B89AB+20240305061804.1186796-1-wentao@uniontech.com/)**

> This is a long-standing issue that uninterruptible sleep in fanotify
> could make system hibernation fail if the usperspace server gets frozen
> before the process waiting for the response (as reported e.g. [1][2]).
>

**[v1: fs/aio: Check IOCB_AIO_RW before the struct aio_kiocb conversion](http://lore.kernel.org/linux-fsdevel/20240304235715.3790858-1-bvanassche@acm.org/)**

> The first kiocb_set_cancel_fn() argument may point at a struct kiocb
> that is not embedded inside struct aio_kiocb. With the current code,
> depending on the compiler.
>

**[v5: fs-verity support for XFS](http://lore.kernel.org/linux-fsdevel/20240304191046.157464-2-aalbersh@redhat.com/)**

> Here's v5 of my patchset of adding fs-verity support to XFS.
>

**[v1: tmpfs: don't interrupt fallocate with EINTR](http://lore.kernel.org/linux-fsdevel/ef5c3b-fcd0-db5c-8d4-eeae79e62267@redhat.com/)**

> I have a program that sets up a periodic timer with 10ms interval. When
> the program attempts to call fallocate on tmpfs, it goes into an infinite
> loop.
>

**[v1: Revert "fs/aio: Make io_cancel() generate completions again"](http://lore.kernel.org/linux-fsdevel/20240304182945.3646109-1-bvanassche@acm.org/)**

> Patch "fs/aio: Make io_cancel() generate completions again" is based on the
> assumption that calling kiocb->ki_cancel() does not complete R/W requests.
>

**[v2: block atomic writes for XFS](http://lore.kernel.org/linux-fsdevel/20240304130428.13026-1-john.g.garry@oracle.com/)**

> This series expands atomic write support to filesystems, specifically
> XFS. Extent alignment is based on new feature forcealign (again), and we
> do not rely on XFS rtvol extent alignment this time.
>

### 网络设备

**[v1: net-next: trace: use TP_STORE_ADDRS macro](http://lore.kernel.org/netdev/20240310121406.17422-1-kerneljasonxing@gmail.com/)**

> Using the macro for other tracepoints use to be more concise.
> No functional change.
>

**[v5: net-next: net: Provide SMP threads for backlog NAPI](http://lore.kernel.org/netdev/20240309090824.2956805-1-bigeasy@linutronix.de/)**

> The RPS code and "deferred skb free" both send IPI/ function call
> to a remote CPU in which a softirq is raised. This leads to a warning on
> PREEMPT_RT because raising softiqrs from function call led to undesired
> behaviour in the past. I had duct tape in RT for the "deferred skb free"
> and Wander Lairson Costa reported the RPS case.
>

**[v2: ethtool HW timestamping statistics](http://lore.kernel.org/netdev/20240309084440.299358-1-rrameshbabu@nvidia.com/)**

> The goal of this patch series is to introduce a common set of ethtool statistics
> for hardware timestamping that a driver implementer can hook into. The
> statistics counters added are based on what I believe are common
> patterns/behaviors found across various hardware timestamping implementations
> seen in the kernel tree today. The mlx5 family of devices is used as the PoC for
> this patch series. Other vendors are more than welcome to chim in on this
> series.
>

**[v1: dt-bindings: net: wireless: brcm,bcm4329-fmac: Add CYW43439 DT binding](http://lore.kernel.org/netdev/20240309031355.269835-1-marex@denx.de/)**

> CYW43439 is a Wi-Fi + Bluetooth combo device from Infineon. The
> WiFi part is capable of 802.11 b/g/n. This chip is present e.g.
> on muRata 1YN module. Extend the binding with its DT compatible.
>

**[v1: net-next: netlink: specs: support generating code for genl socket priv](http://lore.kernel.org/netdev/20240308190319.2523704-1-kuba@kernel.org/)**

> The family struct is auto-generated for new families, support
> use of the sock_priv_* mechanism added in commit a731132424ad
> ("genetlink: introduce per-sock family private storage").
>

**[v2: ip link: hsr: Add support for passing information about INTERLINK device](http://lore.kernel.org/netdev/20240308145729.490863-1-lukma@denx.de/)**

> The HSR capable device can operate in two modes of operations -
> Doubly Attached Node for HSR (DANH) and RedBOX.
>
> The latter one allows connection of non-HSR aware device to HSR network.
> This node is called SAN (Singly Attached Network) and is connected via
> INTERLINK network device.
>

**[v2: nfp: flower: handle acti_netdevs allocation failure](http://lore.kernel.org/netdev/20240308142540.9674-1-duoming@zju.edu.cn/)**

> The kmalloc_array() in nfp_fl_lag_do_work() will return null, if
> the physical memory has run out. As a result, if we dereference
> the acti_netdevs, the null pointer dereference bugs will happen.
>

**[v8: net-next: net: intel: start The Great Code Dedup + Page Pool for iavf](http://lore.kernel.org/netdev/20240308141833.2966600-1-aleksander.lobakin@intel.com/)**

> Here's a two-shot: introduce {,Intel} Ethernet common library (libeth and
> libie) and switch iavf to Page Pool. Details are in the commit messages;
> here's a summary:
>

**[v3: net-next: net/packet: Add getsockopt support for PACKET_COPY_THRESH](http://lore.kernel.org/netdev/AM6PR03MB58487A9704FD150CF76F542899272@AM6PR03MB5848.eurprd03.prod.outlook.com/)**

> Currently getsockopt does not support PACKET_COPY_THRESH,
> and we are unable to get the value of PACKET_COPY_THRESH
> socket option through getsockopt.
>

**[v1: net-next: mlxsw: Support for nexthop group statistics](http://lore.kernel.org/netdev/cover.1709901020.git.petrm@nvidia.com/)**

> ECMP is a fundamental component in L3 designs. However, it's fragile. Many
> factors influence whether an ECMP group will operate as intended: hash
> policy (i.e. the set of fields that contribute to ECMP hash calculation),
> neighbor validity, hash seed (which might lead to polarization) or the type
> of ECMP group used (hash-threshold or resilient).
>

**[[net PATCH] octeontx2-pf: Do not use HW TSO when gso_size < 16bytes](http://lore.kernel.org/netdev/20240308115722.14671-1-gakula@marvell.com/)**

> Hardware doesn't support packet segmentation when segment size
> is < 16 bytes. Hence add an additional check and use SW
> segmentation in such case.
>

**[[Intel-wired-lan] v7: iwl-next: ice: Support 5 layer Tx scheduler topology](http://lore.kernel.org/netdev/20240308113919.11787-1-mateusz.polchlopek@intel.com/)**

> For performance reasons there is a need to have support for selectable
> Tx scheduler topology. Currently firmware supports only the default
> 9-layer and 5-layer topology. This patch series enables switch from
> default to 5-layer topology, if user decides to opt-in.
>

**[v1: net-next: net/netlink: Add getsockopt support for NETLINK_LISTEN_ALL_NSID](http://lore.kernel.org/netdev/AM6PR03MB58482322B7B335308DA56FE599272@AM6PR03MB5848.eurprd03.prod.outlook.com/)**

> Currently getsockopt does not support NETLINK_LISTEN_ALL_NSID,
> and we are unable to get the value of NETLINK_LISTEN_ALL_NSID
> socket option through getsockopt.
>
> This patch adds getsockopt support for NETLINK_LISTEN_ALL_NSID.
>

**[v1: net-next: annotate data-races around sysctl_tcp_wmem[0]](http://lore.kernel.org/netdev/20240308112504.29099-1-kerneljasonxing@gmail.com/)**

> Adding simple READ_ONCE() can avoid reading the sysctl knob meanwhile
> someone is trying to change it.
>

**[v2: net :mana: Add per-cpu stats for MANA device](http://lore.kernel.org/netdev/1709894671-1018-1-git-send-email-shradhagupta@linux.microsoft.com/)**

> Extend 'ethtool -S' output for mana devices to include per-CPU packet
> stats
>

**[v1: net-next: net: gro: move two declarations to include/net/gro.h](http://lore.kernel.org/netdev/20240308102230.296224-1-edumazet@google.com/)**

> Move gro_find_receive_by_type() and gro_find_complete_by_type()
> to include/net/gro.h where they belong.
>

**[v1: net-next: doc/netlink/specs: Add vlan attr in rt_link spec](http://lore.kernel.org/netdev/20240308041518.3047900-1-liuhangbin@gmail.com/)**

> With command:
>  # ./tools/net/ynl/cli.py \
>  --spec Documentation/netlink/specs/rt_link.yaml \
>  --do getlink --json '{"ifname": "eno1.2"}'
>

**[v1: net-next: devlink: Add comments to use netlink gen tool](http://lore.kernel.org/netdev/20240308001546.19010-1-witu@nvidia.com/)**

> Add the comment to remind people not to manually modify
> the net/devlink/netlink_gen.c, but to use tools/net/ynl/ynl-regen.sh
> to generate it.
>

**[v1: net-next: Documentation: Add documentation for eswitch attribute](http://lore.kernel.org/netdev/20240308000106.17605-1-witu@nvidia.com/)**

> Provide devlink documentation for three eswitch attributes:
> mode, inline-mode, and encap-mode.
>

**[v3: net-next: ice: lighter locking for PTP time reading](http://lore.kernel.org/netdev/20240307222510.53654-1-mschmidt@redhat.com/)**

> This series removes the use of the heavy-weight PTP hardware semaphore
> in the gettimex64 path. Instead, serialization of access to the time
> register is done using a host-side spinlock. The timer hardware is
> shared between PFs on the PCI adapter, so the spinlock must be shared
> between ice_pf instances too.
>

**[v1: net-next: udp: no longer touch sk->sk_refcnt in early demux](http://lore.kernel.org/netdev/20240307220016.3147666-1-edumazet@google.com/)**

> After commits ca065d0cf80f ("udp: no longer use SLAB_DESTROY_BY_RCU")
> and 7ae215d23c12 ("bpf: Don't refcount LISTEN sockets in sk_assign()")
> UDP early demux no longer need to grab a refcount on the UDP socket.
>

**[v7: VMware hypercalls enhancements](http://lore.kernel.org/netdev/20240307212949.4166120-1-alexey.makhalov@broadcom.com/)**

> VMware hypercalls invocations were all spread out across the kernel
> implementing same ABI as in-place asm-inline. With encrypted memory
> and confidential computing it became harder to maintain every changes
> in these hypercall implementations.
>

**[v1: net-next: r8169: switch to new function phy_support_eee](http://lore.kernel.org/netdev/92462328-5c9b-4d82-9ce4-ea974cda4900@gmail.com/)**

> Switch to new function phy_support_eee. This allows to simplify
> the code because data->tx_lpi_enabled is now populated by
> phy_ethtool_get_eee().
>

**[v1: net-next: net: phy: simplify a check in phy_check_link_status](http://lore.kernel.org/netdev/de37bf30-61dd-49f9-b645-2d8ea11ddb5d@gmail.com/)**

> Handling case err == 0 in the other branch allows to simplify the
> code. In addition I assume in "err & phydev->eee_cfg.tx_lpi_enabled"
> it should have been a logical and operator. It works as expected also
> with the bitwise and, but using a bitwise and with a bool value looks
> ugly to me.
>

**[v1: ipvs: allow netlink configuration from non-initial user namespace](http://lore.kernel.org/netdev/20240307203107.63815-1-michael.weiss@aisec.fraunhofer.de/)**

> Configuring ipvs in a non-initial user namespace using the genl
> netlink interface, e.g., by 'ipvsadm' is currently resulting in an
> '-EPERM'. This is due to the use of GENL_ADMIN_PERM flag in
> 'ip_vs_ctl.c'.
>

**[[PATCH net-next -v5] net/core/dev.c: enable timestamp static key if CPU isolation is configured](http://lore.kernel.org/netdev/Zen126EYArNCxIYz@tpad/)**

> For systems that use CPU isolation (via nohz_full), creating or destroying
> a socket with SO_TIMESTAMP, SO_TIMESTAMPNS or SO_TIMESTAMPING with flag
> SOF_TIMESTAMPING_RX_SOFTWARE will cause a static key to be enabled/disabled.
> This in turn causes undesired IPIs to isolated CPUs.
>

**[v1: net-next: ipv4: raw: check sk->sk_rcvbuf earlier](http://lore.kernel.org/netdev/20240307163020.2524409-1-edumazet@google.com/)**

> There is no point cloning an skb and having to free the clone
> if the receive queue of the raw socket is full.
>

**[v1: net-next: nexthop: Simplify dump error handling](http://lore.kernel.org/netdev/20240307154727.3555462-1-idosch@nvidia.com/)**

> The only error that can happen during a nexthop dump is insufficient
> space in the skb caring the netlink messages (EMSGSIZE). If this happens
> and some messages were already filled in, the nexthop code returns the
> skb length to signal the netlink core that more objects need to be
> dumped.
>

**[v1: net-next: net: phy: Don't suspend/resume device not in use](http://lore.kernel.org/netdev/AM9PR04MB8506772CFCC05CE71C383A6AE2202@AM9PR04MB8506.eurprd04.prod.outlook.com/)**

> In the case when an MDIO bus contains PHY device not attached to
> the any netdev or is attached to the external netdev, controlled
> by another driver and the driver is disabled, the bus, when PM suspend
> occurs, is trying to suspend/resume also the unattached phydev.
>

**[v1: net: openvswitch: Add sample multicasting.](http://lore.kernel.org/netdev/20240307151849.394962-1-amorenoz@redhat.com/)**

> ** Background **
> Currently, OVS supports several packet sampling mechanisms (sFlow,
> per-bridge IPFIX, per-flow IPFIX). These end up being translated into a
> userspace action that needs to be handled by ovs-vswitchd's handler
> threads only to be forwarded to some third party application that
> will somehow process the sample and provide observability on the
> datapath.
>

### 安全增强

**[v1: randomize_kstack: Improve entropy diffusion](http://lore.kernel.org/linux-hardening/20240309202445.work.165-kees@kernel.org/)**

> The kstack_offset variable was really only ever using the low bits for
> kernel stack offset entropy. Add a ror32() to increase bit diffusion.
>

**[v1: pstore/zone: Don't clear memory twice](http://lore.kernel.org/linux-hardening/fa2597400051c18c6ca11187b0e4b906729991b2.1709972649.git.christophe.jaillet@wanadoo.fr/)**

> There is no need to call memset(..., 0, ...) on memory allocated by
> kcalloc(). It is already zeroed.
>
> Remove the redundant call.
>

**[v6: arm64: qcom: add AIM300 AIoT board support](http://lore.kernel.org/linux-hardening/20240308070432.28195-1-quic_tengfan@quicinc.com/)**

> Add AIM300 AIoT support along with usb, ufs, regulators, serial, PCIe,
> and PMIC functions.
> AIM300 Series is a highly optimized family of modules designed to
> support AIoT applications. It integrates QCS8550 SoC, UFS and PMIC
> chip etc.

**[v4: pstore: add multi-backend suuport](http://lore.kernel.org/linux-hardening/20240308031656.9672-1-xiangzao@linux.alibaba.com/)**

> This is the 4th version of the patch set. In this patchset we aim to add
> pstore multi-backend support then user can register more than one pstore
> backend.
>

**[v2: overflow: Change DEFINE_FLEX to take __counted_by member](http://lore.kernel.org/linux-hardening/20240306235128.it.933-kees@kernel.org/)**

> The norm should be flexible array structures with __counted_by
> annotations, so DEFINE_FLEX() is updated to expect that. Rename
> the non-annotated version to DEFINE_RAW_FLEX(), and update the
> few existing users.
>

**[v3: Add support for QoS configuration](http://lore.kernel.org/linux-hardening/20240306073016.2163-1-quic_okukatla@quicinc.com/)**

> This series adds QoS support for QNOC type device which can be found on
> SC7280 platform. It adds support for programming priority,
> priority forward disable and urgency forwarding. This helps in
> priortizing the traffic originating from different interconnect masters
> at NOC(Network On Chip).
>

**[v3: scsi: replace deprecated strncpy](http://lore.kernel.org/linux-hardening/20240305-strncpy-drivers-scsi-mpi3mr-mpi3mr_fw-c-v3-0-5b78a13ff984@google.com/)**

> This series contains multiple replacements of strncpy throughout the
> scsi subsystem.
>

**[v1: Bring kstack randomized perf closer to unrandomized](http://lore.kernel.org/linux-hardening/20240305221824.3300322-1-jeremy.linton@arm.com/)**

> Currently with kstack randomization there is somewhere on the order of
> 5x worse variation in response latencies vs unrandomized
> syscalls. This is down from
> 10x on pre 6.2 kernels where the RNG
> reseeding was moved out of the syscall path, but get_random_uXX()
> still contains a fair amount of additional global state manipulation
> which is problematic.
>

**[v2: slab: Introduce dedicated bucket allocator](http://lore.kernel.org/linux-hardening/20240305100933.it.923-kees@kernel.org/)**

> Repeating the commit logs for patch 4 here:
>
>     Dedicated caches are available For fixed size allocations via
>     kmem_cache_alloc(), but for dynamically sized allocations there is only
>     the global kmalloc API's set of buckets available. This means it isn't
>     possible to separate specific sets of dynamically sized allocations into
>     a separate collection of caches.
>

**[v3: sock: Use unsafe_memcpy() for sock_copy()](http://lore.kernel.org/linux-hardening/20240304212928.make.772-kees@kernel.org/)**

> While testing for places where zero-sized destinations were still showing
> up in the kernel, sock_copy() and inet_reqsk_clone() were found, which
> are using very specific memcpy() offsets for both avoiding a portion of
> struct sock, and copying beyond the end of it (since struct sock is really
> just a common header before the protocol-specific allocation). Instead
> of trying to unravel this historical lack of container_of(), just switch
> to unsafe_memcpy(), since that's effectively what was happening already
> (memcpy() wasn't checking 0-sized destinations while the code base was
> being converted away from fake flexible arrays).
>

**[v2: greybus: Avoid fake flexible array for response data](http://lore.kernel.org/linux-hardening/20240304211940.it.083-kees@kernel.org/)**

> FORTIFY_SOURCE has been ignoring 0-sized destinations while the kernel
> code base has been converted to flexible arrays. In order to enforce
> the 0-sized destinations (e.g. with __counted_by), the remaining 0-sized
> destinations need to be handled. Instead of converting an empty struct
> into using a flexible array, just directly use a pointer without any
> additional indirection. Remove struct gb_bootrom_get_firmware_response
> and struct gb_fw_download_fetch_firmware_response.
>

### 异步 IO

**[v1: Send and receive bundles](http://lore.kernel.org/io-uring/20240308235045.1014125-1-axboe@kernel.dk/)**

> I went back to the drawing board a bit on the send multishot, and this
> is what came out.
>
> First support was added for provided buffers for send. This works like
> provided buffers for recv/recvmsg, and the intent here to use the buffer
> ring queue as an outgoing sequence for sending.
>

**[v1: io_uring/net: correctly handle multishot recvmsg retry setup](http://lore.kernel.org/io-uring/0baadaaf-2f6b-40d7-b7ec-e0e175e3c4ed@kernel.dk/)**

> If we loop for multishot receive on the initial attempt, and then abort
> later on to wait for more, we miss a case where we should be copying the
> io_async_msghdr from the stack to stable storage. This leads to the next
> retry potentially failing, if the application had the msghdr on the
> stack.
>

### Rust For Linux

**[GIT PULL: Rust for v6.9](http://lore.kernel.org/rust-for-linux/20240309133817.335439-1-ojeda@kernel.org/)**

> This is the next round of the Rust support.
>
> All the commits have been in linux-next for more than a week.
>

**[v1: rust: don't select CONSTRUCTORS](http://lore.kernel.org/rust-for-linux/20240308-constructors-v1-1-4c811342391c@google.com/)**

> This was originally part of commit 4b9a68f2e59a0 ("rust: add support for
> static synchronisation primitives") from the old Rust branch, which used
> module constructors to initialize globals containing various
> synchronisation primitives with pin-init. That commit has never been
> upstreamed, but the `select CONSTRUCTORS` statement ended up being
> included in the patch that initially added Rust support to the Linux
> Kernel.
>

**[v2: rust: add flags for shadow call stack sanitizer](http://lore.kernel.org/rust-for-linux/20240305-shadow-call-stack-v2-1-c7b4a3f4d616@google.com/)**

> Add flags to support the shadow call stack sanitizer, both in the
> dynamic and non-dynamic modes.
>

### BPF

**[v1: bpf-next: selftests/bpf: add fexit and kretprobe triggering benchmarks](http://lore.kernel.org/bpf/20240309005124.3004446-1-andrii@kernel.org/)**

> We already have kprobe and fentry benchmarks. Let's add kretprobe and
> fexit ones for completeness.
>

**[v2: bpf-next: bpf: move sleepable flag from bpf_prog_aux to bpf_prog](http://lore.kernel.org/bpf/20240309004739.2961431-1-andrii@kernel.org/)**

> prog->aux->sleepable is checked very frequently as part of (some) BPF
> program run hot paths. So this extra aux indirection seems wasteful and
> on busy systems might cause unnecessary memory cache misses.
>

**[v2: bpf-next: bpftool: Mount bpffs on provided dir instead of parent dir](http://lore.kernel.org/bpf/20240308130619.28123-1-icegambit91@gmail.com/)**

> When pinning programs/objects under PATH (eg: during "bpftool prog
> loadall") the bpffs is mounted on the parent dir of PATH in the
> following situations:
> - the given dir exists but it is not bpffs.
> - the given dir doesn't exist and the parent dir is not bpffs.
>

**[v1: bpf-next: bpf: cap BPF_PROG_PACK_SIZE to 2MB * num_possible_nodes()](http://lore.kernel.org/bpf/20240308120712.88122-1-puranjay12@gmail.com/)**

> On some architectures like ARM64, PMD_SIZE can be really large in some
> configurations. Like with CONFIG_ARM64_64K_PAGES=y the PMD_SIZE is
> 512MB.
>

**[v1: bpf-next: bpf: Allow helper bpf_get_ns_current_pid_tgid() in cgroup/sk_msg programs](http://lore.kernel.org/bpf/20240307232659.1115872-1-yonghong.song@linux.dev/)**

> Currently bpf_get_current_pid_tgid() is allowed in tracing, cgroup
> and sk_msg progs while bpf_get_ns_current_pid_tgid() is only allowed
> in tracing progs.
>

**[v4: bpf-next: bpf: arena prerequisites](http://lore.kernel.org/bpf/20240307031228.42896-1-alexei.starovoitov@gmail.com/)**

> These are bpf_arena prerequisite patches.
> Useful on its own.
>

**[v1: bpf: cpumap: Zero-initialise xdp_rxq_info struct before running XDP program](http://lore.kernel.org/bpf/20240305213132.11955-1-toke@redhat.com/)**

> When running an XDP program that is attached to a cpumap entry, we don't
> initialise the xdp_rxq_info data structure being used in the xdp_buff
> that backs the XDP program invocation. Tobias noticed that this leads to
> random values being returned as the xdp_md->rx_queue_index value for XDP
> programs running in a cpumap.
>

**[v1: bpf-next: Add bpf_link support for sk_msg prog](http://lore.kernel.org/bpf/20240305202155.3890667-1-yonghong.song@linux.dev/)**

> One of our internal services started to use sk_msg program and currently
> it used existing prog attach/detach2 as demonstrated in selftests.
> But attach/detach of all other bpf programs are based on bpf_link.
> Consistent attach/detach APIs for all programs will make things easy to
> undersand and less error prone. So this patch added bpf_link
> support for BPF_PROG_TYPE_SK_MSG.
>

**[v1: drivers/perf: riscv: Disable PERF_SAMPLE_BRANCH_* while not supported](http://lore.kernel.org/bpf/20240305155223.1823287-1-pulehui@huaweicloud.com/)**

> RISC-V perf does not yet support branch sampling. Two riscv bpf
> testcases get_branch_snapshot and perf_branches/perf_branches_hw failed
> due to not disabling such sampling.
>

**[v3: DONOTMERGE: Add minimal XDP support to TI AM65 CPSW Ethernet driver](http://lore.kernel.org/bpf/20240223-am65-cpsw-xdp-basic-v3-0-5d944a9d84a0@baylibre.com/)**

> This patch adds XDP support to TI AM65 CPSW Ethernet driver.
>

**[v3: bpf-next: bpf: Add a generic bits iterator](http://lore.kernel.org/bpf/20240305064056.69536-1-laoar.shao@gmail.com/)**

> Three new kfuncs, namely bpf_iter_bits_{new,next,destroy}, have been
> added for the new bpf_iter_bits functionality. These kfuncs enable the
> iteration of the bits from a given address and a given number of bits.
>

**[v4: bpf-next: mm: Enforce ioremap address space and introduce sparse vm_area](http://lore.kernel.org/bpf/20240305030516.41519-1-alexei.starovoitov@gmail.com/)**

> There are various users of kernel virtual address space:
> vmalloc, vmap, ioremap, xen.
>
> - vmalloc use case dominates the usage. Such vm areas have VM_ALLOC flag
> and these areas are treated differently by KASAN.
>

**[v6: net-next: Device Memory TCP](http://lore.kernel.org/bpf/20240305020153.2787423-1-almasrymina@google.com/)**

> This revision largely rebases on top of net-next and addresses the little
> feedback RFCv5 received.
>

**[v1: bpf-next: arm64, bpf: Use bpf_prog_pack for arm64 bpf trampoline](http://lore.kernel.org/bpf/20240304202803.31400-1-puranjay12@gmail.com/)**

> We used bpf_prog_pack to aggregate bpf programs into huge page to
> relieve the iTLB pressure on the system. This was merged for ARM64[1]
> We can apply it to bpf trampoline as well. This would increase the
> preformance of fentry and struct_ops programs.
>

## 周边技术动态

### Qemu

**[v10: riscv: set vstart_eq_zero on mark_vs_dirty](http://lore.kernel.org/qemu-devel/20240310115315.187283-1-dbarboza@ventanamicro.com/)**

> This version has changes in the wording on patch 9 subject and commit
> msg. The previous subject, "target/riscv: Clear vstart_qe_zero flag",
> isn't accurate. We're not clearing (i.e. setting to false/zero) the
> flag, we're setting the flag to 'true' in the end of each insns.
>

**[v1: target/riscv: raise an exception when CSRRS/CSRRC writes a read-only CSR](http://lore.kernel.org/qemu-devel/20240308084014.22054-1-yumin686@andestech.com/)**

> Both CSRRS and CSRRC always read the addressed CSR and cause any read side
> effects regardless of rs1 and rd fields. Note that if rs1 specifies a register
> holding a zero value other than x0, the instruction will still attempt to write
> the unmodified value back to the CSR and will cause any attendant side effects.
>

**[v1: riscv-to-apply queue](http://lore.kernel.org/qemu-devel/20240308111152.2856137-1-alistair.francis@wdc.com/)**

> The following changes since commit 8f6330a807f2642dc2a3cdf33347aa28a4c00a87:
>
>   Merge tag 'pull-maintainer-updates-060324-1' of https://gitlab.com/stsquad/qemu into staging (2024-03-06 16:56:20 +0000)
>

**[v2: riscv: QEMU RISC-V IOMMU Support](http://lore.kernel.org/qemu-devel/20240307160319.675044-1-dbarboza@ventanamicro.com/)**

> This is the second version of the work Tomasz sent in July 2023 [1].
> I'll be helping Tomasz upstreaming it.
>

**[v1: target/riscv: Support Zve32x and Zve64x extensions](http://lore.kernel.org/qemu-devel/20240306170855.24341-1-jason.chien@sifive.com/)**

> This patch series adds the support for Zve32x and Zvx64x and makes vector
> registers visible in GDB if any of the V/Zve*/Zvk* extensions is enabled.
>

**[v1: target/riscv/vector_helper.c: Avoid shifting negative in fractional LMUL checking](http://lore.kernel.org/qemu-devel/20240306161036.938931-1-max.chou@sifive.com/)**

> When vlmul is larger than 5, the original fractional LMUL checking may
> gets unexpected result.
>

**[v1: target/riscv: Implement dynamic establishment of custom decoder](http://lore.kernel.org/qemu-devel/20240306093308.35188-1-eric.huang@linux.alibaba.com/)**

> In this patch, we modify the decoder to be a freely composable data
> structure instead of a hardcoded one. It can be dynamically builded up
> according to the extensions.
> This approach has several benefits:
> 1. Provides support for heterogeneous cpu architectures. As we add decoder in
>    CPUArchState, each cpu can have their own decoder, and the decoders can be
>    different due to cpu's features.
>

**[v1: Add RISC-V Server Platform Reference Board](http://lore.kernel.org/qemu-devel/20240304102540.2789225-1-fei2.wu@intel.com/)**

> The RISC-V Server Platform specification[1] defines a standardized set
> of hardware and software capabilities, that portable system software,
> such as OS and hypervisors can rely on being present in a RISC-V server
> platform. This patchset provides a RISC-V Server Platform (RVSP)
> reference implementation on qemu which is in compliance with the spec
> as faithful as possible.
>

### Buildroot

**[v1: next: toolchain/toolchain-external/toolchain-external-bootlin: bump to 2024.02](http://lore.kernel.org/buildroot/20240303151239.185686-1-thomas.petazzoni@bootlin.com/)**

> support in Buildroot. Notable changes:
>
> - Bleeding edge toolchains now use binutils 2.42, and stable
>   toolchains use binutils 2.41
>

### U-Boot

**[v1: board: sophgo: milkv_duo: Add ethernet support for Milk-V Duo board](http://lore.kernel.org/u-boot/20240310055816.11575-1-seashell11234455@gmail.com/)**

> This series add init code for cv1800b ethernet phy and enable ethernet
> support for Sophgo Milk-V Duo board.
>

**[v2: mmc: sophgo: milkv_duo: Add SD card support for Milk-V Duo board](http://lore.kernel.org/u-boot/20240309175330.79267-1-seashell11234455@gmail.com/)**

> This series add sdhci driver for cv1800b SoC and enable SD card support for
> Sophgo Milk-V Duo board.
>

**[v2: riscv: cpu: Add support for cv1800b SoC](http://lore.kernel.org/u-boot/20240309165533.48795-1-seashell11234455@gmail.com/)**

> This series add basic support for cv1800b SoC and enable dcache support.
>
> The cv1800b utilizes CSR instructions to manipulate the first and second
> bits in the MHCR register (0x7C1) to indicate the activation status of icache
> and dcache.
>

**[v1: cmd: sbi: Correctly display unknown implementation IDs](http://lore.kernel.org/u-boot/20240306144402.175957-1-heinrich.schuchardt@canonical.com/)**

> was shown. The number 16777216 is not the implementation ID.
>
> * Show the correct number
> * Use a hexadecimal output format
> * Add a missing line feed
>

**[v1: riscv: dts: jh7110: Enable PLL node in SPL](http://lore.kernel.org/u-boot/1709694011-683-1-git-send-email-ganboing@gmail.com/)**

> Previously PLL node was missing from SPL dts. This caused BUS_ROOT
> to stay on OSC clock (24Mhz). As a result, all peripherals have to
> run at a much lower frequency, and loading from sdcard/emmc is slow.
> Thus, enabling PLL node in dts to fix this.
>

**[v1: riscv: cpu: improve multi-letter extension detection in supports_extension()](http://lore.kernel.org/u-boot/20240304232835.3076533-2-conor@kernel.org/)**

> The first multi-letter extension after the single-letter extensions does
> not have to be preceded by an underscore, which could cause the parser
> to mistakenly find a single-letter extension after the start of the
> multi-letter portion of the string.
>

**[v2: arm64: Enable CONFIG_64BIT for static analysis](http://lore.kernel.org/u-boot/1cb3255b-5ed7-443b-8a02-6e998126d417@moroto.mountain/)**

> The makefiles currently pass -m32 to Smatch static checker when I'm
> building on arm64.  Also the arch is set to "arm" and Smatch thinks
> "arm" is 32 bits and "arm64" is 64 bits.  With this patchset we pass
> -m64 and Smatch works correctly.
>

