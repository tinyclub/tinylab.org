---
layout: post
author: 'Xiao Jun'
title: "LWN 70465: 引入 kgdb 到 2.6"
album: 'LWN 中文翻译'
group: translation
license: "cc-by-sa-4.0"
permalink: /lwn-70465-bringing-kgdb-into-2.6/
description: "LWN 文章翻译，引入 kgdb 到 2.6"
category:
  - 内核调试
  - LWN
tags:
  - Linux
  - kgdb
---

> 原文：[Bringing kgdb into 2.6](https://lwn.net/Articles/70465/)
> 原创：By corbet @ Feb 10, 2004
> 翻译：By [darmac](https://github.com/darmac) of [TinyLab.org][1]
> 校对：无

> The kernel development community has long been divided over the topic of interactive debuggers. Many hackers find debuggers to be an indispensable part of their development toolkits. Others claim that debuggers lead people to fix symptoms rather than problems; rather than use such a crutch, these people say, it is better to truly understand the code. Once you have "become one" with the code, finding bugs is not that hard. 

长期以来，内核开发社区在交互式调试器的主题上一直存在分歧。很多黑客发现调试器是他们开发工具中不可或缺的一环。另一些人声称调试器引导人们修复症状而非问题；这些人说，与其使用这种依靠还不如真正的去理解代码。一旦你成为代码的一部分，寻找漏洞就不是那么困难了。

>The latter view is held by Linus Torvalds, who explained his approach in very clear terms back in 2000: 
>>You can use a kernel debugger if you want to, and I won't give you the cold shoulder because you have "sullied" yourself. But I'm not going to help you use one, and I would frankly prefer people not to use kernel debuggers that much. So I don't make it part of the standard distribution, and if the existing debuggers aren't very well known I won't shed a tear over it. 

后一种观点是由 Linus Torvalds 持有的，早在 2000 年他就用非常清楚的术语解释了他的方法：

如果你想，你可以使用内核调试器，并且我不会因为你“玷污”了自己而冷落你。但是我不会帮助你使用它，并且坦率地说，我希望人们不要频繁地使用内核调试器。所以我没有让它成为标准发行版的一部分，而且即便现有的调试器没什么名气我也不会为它留下一滴眼泪。

>The end result is that there has never been support for interactive debuggers in the mainline kernel - at least, for the more popular architectures. 

最终结果是在主线内核中从来没有支持过交互式调试器 - 至少，对主流的架构是如此。

> The 2.6 kernel is now Andrew Morton's turf, however, and Andrew is more open to the value of debugging tools. In fact, he has carried a version of the kgdb patch in his -mm tree for a long time. Might Andrew merge kgdb into the 2.6 kernel at some point?

然而，2.6 内核现在是 Andrew Morton 的地盘，而且 Andrew 对调试工具的价值持更加开放的态度。实际上，他已经在他的 -mm 树中携带一个版本的 kgdb 补丁很长时间了。 Andrew 会在某个时候将 kgdb 合进 2.6 内核中吗？

> The answer from Andrew seems to be "maybe":
>> I wouldn't support inclusion of i386 kgdb until it has had a lot of cleanup, possible de-featuritisification and some thought has been applied to splitting it into arch and generic bits. It's quite a lot of work.

来自 Andrew 的答案看起来是“可能”：

我不会支持包含 i386 的 kgdb ，直到它们做了大量的清理工作，可能的去特征化和一些想法已经被应用于将它分割为架构和通用部分。它们需要大量的工作。

> In other words, there is no disagreement with the idea of merging kgdb, but the code needs some work first. Problems include a large number of #ifdefs, and the fact that the patch is relatively intrusive, touching many files. There are also objections to how the debugger works with the virtual memory subsystem, especially for the i386 architecture. All of these problems are probably solvable, given enough development time. The interest in a mainline kgdb is probably high enough that the cleanup work will happen, and kgdb may well be merged; a kgdb CVS repository has been established for those interested in this effort. An eventual merge into 2.6 seems unlikely to carry forward into 2.7, however.

换句话说，合并 kgdb 的想法并没有异议，但首先要对代码做一些工作。包括大量使用“#ifdefs”的问题，而且事实是这个补丁相对繁琐，触及到很多文件。对于调试器如何处理虚拟内存子系统也有反对意见，尤其是对 i386 架构。只要有足够的研发时间，所有这些问题都是可以解决的。对主线 kgdb 的兴趣很可能已经足够高了以至于清理工作即将发生，并且 kgdb 可以被很好地合并；一个 kgdb 的 CVS 版本库已经为那些对此工作感兴趣的人建立起来了。然而，最终合并进2.6的版本可能不会被推进到2.7。

[1]: http://tinylab.org